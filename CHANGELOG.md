# 更新履歴 (CHANGELOG)

Grok-Auto-Saver の全ての変更点は、このファイルに記録されます。開発の進捗に合わせて、ある程度の機能改修が完了した段階でリリースを行います。

## [3.0] - 2026-01-19

### 追加 (Added)
- **Organizer進捗表示:** コマンドプロンプト上で各処理の進捗状況をリアルタイムに表示する機能を追加（Windows互換の安全なテキスト表示と1行更新プログレスバーを採用）。
- **Favorites特別表示:** ビューアーにおいて、Favorites（お気に入り）および動画ファイルを各日付のタイムライン最上部に「⭐ Favorites」として独立表示する機能を追加（通常の時系列リストからは除外）。
- **折りたたみ機能:** ビューアーの各プロンプトグループのヘッダーをクリックすることで、メディア一覧を開閉（折りたたみ）できる機能を追加。

### 変更 (Changed)
- **動画の扱い:** 動画ファイル (`.mp4`) はプロンプトの有無に関わらず、常に「Favorites」として扱うように仕様変更。
- **実行高速化:** 不要画像クリーニング（ゴミ削除）の対象範囲を「本日のフォルダ」のみに限定し、処理時間を大幅に短縮。
- **安定性向上:** ログ出力時の文字コードエラー（非対応絵文字）を修正し、Windows環境での安定動作を確保。

## [2.7] - 2026-01-16

### 変更 (Changed)

- **バージョン管理:** プロジェクト全体のバージョンを 2.7 に更新。
- **manifest.json:** バージョン表記を 2.7.0 に更新。
- **Grok Organizer:** 実行時のバージョン表示を v2.7.0 に更新。

## [2.6.2] - 2026-01-15

### 修正 (Fixed)

- **UI調整:** 保存検知時の枠線を 4px から 2px に細くし、視認性を向上。
- **動画フィードバック改善:** 動画自動保存ボタンの色分け（緑/オレンジ）がちらつく問題を解消。
- **Organizer:** プロンプト整理開始メッセージが二重に表示される不具合を修正。
- **プロンプトUI:** 自動保存されたプロンプトの緑色アンダーラインが自動的に消えるように改善。

## [2.6.1] - 2026-01-15

### 変更 (Changed)

- **フォルダ構成の刷新:** プロジェクト全体を `_App` (アプリ本体), `_Data` (ユーザーデータ), `_Dev` (開発資料) の3つに分類・整理。
- **ダウンロード判定の調整:** 生成途中の低画質画像を排除するため、最小サイズ判定を 20KB から **50KB** に引き上げ。また、サイズ不足で除外された画像にはオレンジ色の枠線を表示するように変更（視覚的フィードバック）。
- **Docs整理:** 開発ドキュメントを `specs` (仕様) と `misc` (その他) に分類し、総目次 (`top.md`) を整備。
- **Popup UI:** エクスポートボタン（レガシー機能）を削除し、ダウンロードフォルダを開く「フォルダ」ボタンを追加。
- **Organizer:** バックアップスクリプト (`archive_grok_tools.py`) を新フォルダ構成に対応。

## [2.6] - 2026-01-14

### 変更 (Changed)

- **重複防止の強化:**  Favorites保存時の重複判定を「URL全体のハッシュ」から「UUIDの厳格な抽出」に変更し、判定精度を向上。さらにインメモリキャッシュによる短時間連打時の重複DL防止（Race Condition対策）を実装。
- **アーカイブ運用の最適化:**  Organizerのアーカイブ (`Archived`) フォルダを「1世代のみ保持」する仕様に変更。実行のたびに古いバックアップを削除し、常に最新の1回分のみを残すことで容量肥大化を防止。

### 修正 (Fixed)

- プロンプト整理時に `All_Prompts_Merged.txt` を二重に読み込んでしまうバグを修正。

## [2.5] - 2026-01-14

### 追加 (Added)

- **ポップアップ改善:**  拡張機能ポップアップに「Grok」ボタンを追加。ワンクリックでお気に入り画面 (`https://grok.com/imagine/favorites`) へアクセス可能に。
- **お気に入りログ自動生成:**  Favorites画面からの保存時に `System/FavLogs` へログ(JSON)を自動生成。これにより `Grok_Viewer.html` でのお気に入りフィルター機能が復活。
- **高画質リカバリー:**  Favorites画面のサムネイルURLから自動的にリサイズパラメータを除去し、オリジナルの高画質画像をダウンロードする機能を追加。

### 変更 (Changed)

- **保存ロジックの適正化:**  高画質化に伴い、Favoritesからの保存先を「日付フォルダ (`YYYYMMDD`)」に統一。
- **強力なクリーンアップ:**  `grok_organizer.py`  に「100KB以下のファイル削除」ルールを追加。
- **強制保存:**  Favorites画面からの保存は、過去の重複履歴に関わらず常に保存するように変更（v2.6で重複判定を強化）。

### 修正 (Fixed)

- Favorites画面からの保存時、ファイル名が `preview_image` やUUIDになってしまう問題を修正（自動的に `grok_image_YYYYMMDD_...` 形式へリネーム）。

## [2.2] - 2026-01-14

### 変更 (Changed)

- **プロンプト保存ルールの改善:**  連続重複チェックに「日付境界」の判定を導入。内容が同一でも日付が変わった場合は別履歴として保存するように修正。これによりViewerでの日付別整理が正しく行われるように改善。
- **画像保存判定の改善:**   `background.js`  の最小ファイルサイズ制限を 100KB から 20KB へ引き下げ。お気に入り画面の軽量画像も保存可能に。
- **Organizerログの可視化:**   `grok_organizer.py`  のクリーニング処理において、削除したファイル名と理由をリアルタイムで表示するように変更。
### 修正 (Fixed)

- お気に入り画面からのダウンロードが機能しない（枠だけ出る）不具合の修正。
- プロンプトの重複判定を「直前の保存内容と完全に一致する場合のみ」に緩和。
- クリーニング処理中、画面がフリーズしたように見える（ログが出ない）問題の解消。
## [2.1] - 2026-01-13

### 追加 (Added)

- **初公開バージョン:**  GitHubおよび一般公開用としての最初の安定版リリース。
- **画像自動保存:**  Imagine画面やFavorites画面で表示された画像を検知し、即座に保存。
- **動画ダウンロード支援:**  動画ポストにおけるダウンロードボタンの自動クリック機能。
- **Organizerスクリプト:**  日付別フォルダへの自動仕分け、不要画像のクリーンアップ機能。
- **HTMLビューアー:**  保存した画像・動画・プロンプトを時系列で閲覧・検索できる専用ビューアー生成機能。
- **保存パスの統一:**  全コンポーネントの保存先ルートフォルダ名を  `Grok-Auto-Saver`  に固定。
## [1.0] - 2025-12-15 (Internal)

### 追加 (Added)

- **プロジェクト着手:**  開発開始。基本的な自動保存機能およびプロンプト保存機能のプロトタイプ実装。